(this.webpackJsonpkartonki=this.webpackJsonpkartonki||[]).push([[0],{20:function(e,t,r){e.exports={App:"App_App__LKvuZ"}},37:function(e,t,r){e.exports={headerWrapper:"header_headerWrapper__1bHj-"}},38:function(e,t,r){},39:function(e,t,r){e.exports={inputWrapper:"Input_inputWrapper__2iRGF"}},40:function(e,t,r){e.exports={buttonWrapper:"Button_buttonWrapper__11CDY"}},41:function(e,t,r){e.exports={loadingProgress:"Loading_loadingProgress__25Q2Y"}},43:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){e.exports=r(76)},52:function(e,t,r){},76:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(17),c=r.n(s),u=(r(52),r(3)),o=r(20),i=r.n(o),l=r(4),p=r(15),m=r(2),d=r.n(m),g=r(5),f=r(8),E="registr_reducer/REGISTRATE_ERROR",v="auth_reducer/LOGIN_ERROR",h="auth_reducer/LOGIN_SUCCESS",b=r(35),w=r.n(b).a.create({baseURL:"https://neko-cafe-back.herokuapp.com/auth/"}),O=function(){var e=Object(g.a)(d.a.mark((function e(t,r,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/login",{email:t,password:r,rememberMe:n});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(g.a)(d.a.mark((function e(t,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/register",{email:t,password:r});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),j=function(){var e=Object(g.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/forgot",{email:t,html1:"<a href='http://localhost:3000/kartonki#/new-password",html2:"'>reset-password-link</a>"});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(g.a)(d.a.mark((function e(t,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/set-new-password",{password:t,resetPasswordToken:r});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),R={authSuccess:!1,myName:"",errorMessage:"",token:"",isLoading:!1},k=function(e){return{type:"IS_LOADING",value:e}},_=function(e){return{type:v,errorMessage:e}},y=function(e,t,r){return function(){var n=Object(g.a)(d.a.mark((function n(a){var s;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(k(!0)),n.next=4,O(e,t,r);case 4:(s=n.sent).error?a(_(s.error)):a((c=s.success,u=s.name,o=s.token,{type:h,loginSuccess:c,myName:u,token:o})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(_(n.t0.response.data.error));case 11:a(k(!1));case 12:case"end":return n.stop()}var c,u,o}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(f.a)({},e,{authSuccess:t.loginSuccess,myName:t.myName,token:t.token});case v:return Object(f.a)({},e,{errorMessage:t.errorMessage});case"IS_LOADING":return Object(f.a)({},e,{isLoading:t.value});default:return e}},N=r(36),x={success:!1,message:""},L=function(e,t){return function(){var r=Object(g.a)(d.a.mark((function r(n){var a;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(k(!0)),r.next=4,P(e,t);case 4:(a=r.sent).error?n(T(a.error)):n(W(a.success)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),n(T(r.t0.response.data.error));case 11:n(k(!1));case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()},W=function(e){return{type:"NEW_PASSWORD_SUCCESS",recoverSuccess:e}},T=function(e){return{type:"NEW_PASSWORD_ERROR",errorMessage:e}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_PASSWORD_SUCCESS":return Object(f.a)({},e,{success:t.recoverSuccess,message:"Successful!"});case"NEW_PASSWORD_ERROR":return Object(f.a)({},e,{message:t.errorMessage});default:return e}},M={},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FIRST_ACTION":case"SECOND_ACTION":default:return e}},I={success:!1,message:""},U=function(e){return{type:"PASSWORD_RECOVER_SUCCESS",recoverSuccess:e}},F=function(e){return{type:"PASSWORD_RECOVER_ERROR",errorMessage:e}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PASSWORD_RECOVER_SUCCESS":return Object(f.a)({},e,{success:t.recoverSuccess,message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e! \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0432\u043e\u0439 email."});case"PASSWORD_RECOVER_ERROR":return Object(f.a)({},e,{message:t.errorMessage});default:return e}},B={message:"",registeredSuccess:!1},V=function(e){return{type:E,errorMessage:e}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"registr_reducer/REGISTRATE_SUCCESS":return Object(f.a)({},e,{message:"successich",registeredSuccess:t.registeredSuccess});case E:return Object(f.a)({},e,{message:t.errorMessage});default:return e}},Y=Object(p.c)({auth:C,newPass:A,profile:D,recoverPass:G,registr:z}),J=Object(p.d)(Y,Object(p.a)(N.a)),H=r(10),K=r(37),Q=r.n(K),Z=r(13),$=r(38),q=r.n($),X=r(39),ee=r.n(X),te=function(e){var t=e.inputPlaceholder,r=e.value,n=e.checked,s=e.inputType,c=e.inputOnChange,u=e.inputOnChangeChecked;return a.a.createElement("div",{className:ee.a.inputWrapper},a.a.createElement("input",{onChange:function(e){c?c(e.currentTarget.value):u&&u(e.currentTarget.checked)},placeholder:t,value:r,checked:n,type:s}))},re=r(40),ne=r.n(re),ae=function(e){var t=e.buttonOnClick,r=e.buttonName;return a.a.createElement("div",{className:ne.a.buttonWrapper},a.a.createElement("button",{onClick:t},r||"submit"))},se=r(41),ce=r.n(se),ue=function(){var e=Object(n.useState)("."),t=Object(u.a)(e,2),r=t[0],s=t[1],c=Object(l.c)((function(e){return e.auth.isLoading}));return a.a.createElement("span",{className:ce.a.loadingProgress},c&&"LOADING"+(setTimeout((function(){r.length<5?s(r+"."):s(".")}),1e3),r))},oe=function(e){var t=e.login,r=e.password,n=e.setPassword,s=e.setLogin,c=e.setRememberMe,u=e.signIn,o=e.rememberMe,i=e.loginError,l=e.isLoading;return a.a.createElement("div",{className:q.a.loginizationWrapper},a.a.createElement("h2",null,"Loginization Page"),a.a.createElement("div",null,a.a.createElement(te,{inputOnChange:s,inputType:"text",value:t,inputPlaceholder:"login or email"})),a.a.createElement("div",null,a.a.createElement(te,{inputType:"password",value:r,inputOnChange:n,inputPlaceholder:"your password"})),a.a.createElement("div",null,a.a.createElement(te,{inputType:"checkbox",checked:o,inputOnChangeChecked:c})),a.a.createElement("div",null,a.a.createElement(ae,{buttonName:"Sign In",buttonOnClick:u})),l&&a.a.createElement(ue,null),i?a.a.createElement("span",null,"loginError"):null)},ie=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth})),r=t.authSuccess,s=t.errorMessage,c=t.isLoading,o=Object(n.useState)(""),i=Object(u.a)(o,2),p=i[0],m=i[1],f=Object(n.useState)(""),E=Object(u.a)(f,2),v=E[0],h=E[1],b=Object(n.useState)(!1),w=Object(u.a)(b,2),O=w[0],S=w[1],j=function(){var t=Object(g.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(y(p,v,O));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,r?a.a.createElement(Z.a,{to:Ne}):a.a.createElement(oe,{setLogin:m,setPassword:h,setRememberMe:S,loginError:s,login:p,password:v,rememberMe:O,signIn:j,isLoading:c}))},le=function(){return a.a.createElement(ie,null)},pe=r(43),me=r.n(pe),de=function(){return a.a.createElement("div",{className:me.a.profileWrappe},a.a.createElement("h2",null,"Profile Page"))},ge=r(44),fe=r.n(ge),Ee=function(e){var t=e.login,r=e.password,n=e.repeatingPassword,s=e.setPassword,c=e.setLogin,u=e.setRepeatingPassword,o=e.registerMe,i=e.similar,l=e.wrongRepeatingPassword,p=e.messageFromServer,m=e.isLoading;return a.a.createElement("div",{className:fe.a.registrationWrapper},a.a.createElement("h2",null,"Registration Page"),a.a.createElement("div",null,a.a.createElement(te,{inputOnChange:c,inputType:"text",value:t,inputPlaceholder:"login or email"})),a.a.createElement("div",null,a.a.createElement(te,{inputType:"password",value:r,inputOnChange:s,inputPlaceholder:"your password"})),a.a.createElement("div",null,a.a.createElement(te,{inputType:"password",value:n,inputOnChange:u,inputPlaceholder:"repeat your password"}),!i&&a.a.createElement("span",null,"password does not match!")),a.a.createElement("div",null,a.a.createElement(ae,{buttonOnClick:i?o:l,buttonName:"Sign Up"}),m&&a.a.createElement(ue,null),a.a.createElement("span",null,p)))},ve=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.registr})),r=t.registeredSuccess,s=t.message,c=Object(l.c)((function(e){return e.auth})).isLoading,o=Object(n.useState)(""),i=Object(u.a)(o,2),p=i[0],m=i[1],f=Object(n.useState)(""),E=Object(u.a)(f,2),v=E[0],h=E[1],b=Object(n.useState)(""),w=Object(u.a)(b,2),O=w[0],j=w[1],P=Object(n.useState)(!1),R=Object(u.a)(P,2),_=R[0],y=R[1];Object(n.useEffect)((function(){y(!(O!==v||!O))}),[O,v]);return a.a.createElement(a.a.Fragment,null,r?a.a.createElement(Z.a,{to:Ce}):a.a.createElement(Ee,{setLogin:m,setPassword:h,login:p,password:v,repeatingPassword:O,setRepeatingPassword:j,similar:_,registerMe:function(){e(function(e,t){return function(){var r=Object(g.a)(d.a.mark((function r(n){var a;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(k(!0)),r.next=4,S(e,t);case 4:(a=r.sent).error?n(V(a.error)):n({type:"registr_reducer/REGISTRATE_SUCCESS",registeredSuccess:a.success}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),n(V(r.t0.response.data.error));case 11:n(k(!1));case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()}(p,v))},messageFromServer:s,wrongRepeatingPassword:function(){e(V("wrong credentials"))},isLoading:c}))},he=function(){return a.a.createElement(ve,null)},be=r(45),we=r.n(be),Oe=function(e){var t=e.newPassword,r=e.isLoading,n=e.setNewPassword,s=e.newPasswordRepeat,c=e.setNewPasswordRepeat,u=e.differentPassword,o=e.getDataFromServer,i=e.responseStatusMessage;return a.a.createElement("div",{className:we.a.newPasswordWrapper},a.a.createElement("h2",null,"New Password Page"),a.a.createElement("div",null,a.a.createElement(te,{inputType:"password",value:t,inputOnChange:n,inputPlaceholder:"New password"})),a.a.createElement("div",null,a.a.createElement(te,{inputType:"password",value:s,inputOnChange:c,inputPlaceholder:"Repeat new password"})),a.a.createElement("div",null,a.a.createElement("span",null,u),a.a.createElement(ae,{buttonName:"set new password",buttonOnClick:o}),r&&a.a.createElement(ue,null),a.a.createElement("span",null,i)))},Se=Object(Z.g)((function(e){var t=Object(l.b)(),r=Object(n.useState)(!1),s=Object(u.a)(r,2),c=s[0],o=s[1],i=Object(n.useState)(""),p=Object(u.a)(i,2),m=p[0],f=p[1],E=Object(n.useState)(""),v=Object(u.a)(E,2),h=v[0],b=v[1],w=Object(n.useState)(""),O=Object(u.a)(w,2),S=O[0],j=O[1],P=Object(l.c)((function(e){return e.newPass.message})),R=Object(l.c)((function(e){return e.auth.isLoading}));Object(n.useEffect)((function(){m===h&&h?(o(!0),j("")):(o(!1),j("Enter similar pass"))}),[m,h]);var k=e.match.params.token,_=function(){var e=Object(g.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c&&t(L(m,k));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(Oe,{newPassword:m,setNewPassword:f,newPasswordRepeat:h,setNewPasswordRepeat:b,responseStatusMessage:P,getDataFromServer:_,similar:c,differentPassword:S,isLoading:R})})),je=function(){return a.a.createElement(Se,null)},Pe=r(46),Re=r.n(Pe),ke=function(e){var t=e.putUserEmail,r=e.userEmail,n=e.responseStatusMessage,s=e.getDataFromServer,c=e.isLoading;return a.a.createElement("div",{className:Re.a.pswdRecoverWrapper},a.a.createElement("h2",null,"Password Recovering Page"),a.a.createElement("div",null,a.a.createElement(te,{inputType:"email",value:r,inputOnChange:t,inputPlaceholder:"email"}),a.a.createElement("span",null," ",n," ")),a.a.createElement("div",null,a.a.createElement(ae,{buttonName:"Recover",buttonOnClick:s})),c&&a.a.createElement(ue,null))},_e=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),r=t[0],s=t[1],c=Object(l.c)((function(e){return e.recoverPass})),o=c.success,i=c.message,p=Object(l.c)((function(e){return e.auth.isLoading})),m=Object(l.b)();return a.a.createElement(ke,{userEmail:r,putUserEmail:s,responseStatus:o,getDataFromServer:function(){var e;m((e=r,function(){var t=Object(g.a)(d.a.mark((function t(r){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(k(!0)),t.next=4,j(e);case 4:n=t.sent,console.log(n),n.error?r(F(n.error)):r(U(n.success)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),r(F(t.t0.response.data.error)),console.log(t.t0.response.data.error);case 13:r(k(!1));case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))},responseStatusMessage:i,isLoading:p})},ye=function(){return a.a.createElement(_e,null)},Ce="/auth",Ne="/profile",xe=function(){return a.a.createElement(Z.d,null,a.a.createElement(Z.b,{path:Ce,render:function(){return a.a.createElement(le,null)}}),a.a.createElement(Z.b,{path:"/new-password:token",render:function(){return a.a.createElement(je,null)}}),a.a.createElement(Z.b,{path:Ne,render:function(){return a.a.createElement(de,null)}}),a.a.createElement(Z.b,{path:"/recover-password",render:function(){return a.a.createElement(ye,null)}}),a.a.createElement(Z.b,{path:"/registration",render:function(){return a.a.createElement(he,null)}}),a.a.createElement(Z.b,{exact:!0,path:"/",render:function(){return a.a.createElement(Z.a,{to:Ce})}}),a.a.createElement(Z.b,{path:"*",render:function(){return a.a.createElement("div",null,"404 BAD GATEWAY")}}))},Le=function(){return a.a.createElement("div",{className:Q.a.headerWrapper},a.a.createElement(H.b,{to:Ce},"LoginizationPage"),a.a.createElement(H.b,{to:"/new-password:token"},"NewPasswordPage"),a.a.createElement(H.b,{to:Ne},"ProfilePage"),a.a.createElement(H.b,{to:"/recover-password"},"PasswordRecoveringPage"),a.a.createElement(H.b,{to:"/registration"},"RegistrationPage"))},We=function(e){var t=Object(n.useState)(!0),r=Object(u.a)(t,2),s=(r[0],r[1],Object(n.useState)(".")),c=Object(u.a)(s,2);c[0],c[1];return a.a.createElement("div",{className:i.a.App},a.a.createElement(Le,null),a.a.createElement(xe,null))},Te=function(){return a.a.createElement(H.a,null,a.a.createElement(l.a,{store:J},a.a.createElement(We,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.b9966504.chunk.js.map